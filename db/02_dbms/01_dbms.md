# DBMS
## DBMS DataBase Management System
데이터베이스를 제어 및 관리하는 통합 시스템을 `DBMS` 라고 합니다. 대표적으로 SQL이 포함됩니다. 
## DBMS 구성 요소
|일반사용자||응용프로그래머||데이터베이스관리자|
|:---:|---|:---:|---|:---:|
|│||│||│|
|질의어||DML/응용프로그램||DDL/스키마|
|│||│||│|
|질의어처리기||DML예비컴파일러||DDL컴파일러|
|│||│||│|
|│||DML컴파일러||│|
|└ |─>|│||│|
|트랜잭션 관리자||런타임 DB 처리기||│|
|||│||│|
|||저장 데이터 관리자|<─|┘|
|저장 데이터베이스|<─|┴|─>|카탈로그|
- 질의어와 DML은 `런타임 데이터베이스 처리기 run-time database processor` 가 DB 접근을 관리합니다. 
- `트랜잭션 관리자` 에 의해 DB 접근 과정에서 `무결성 제약조건`과 `권한 검사`를 하고, 여러 사용자의 요구를 동시에 처리하도록 `트랜잭션 병행 제어`와 장애 발생 시 `recovery 작업`을 수행합니다.
## 데이터 독립성
데이터의 물리적, 논리적 구조에 변경이 되어도 응용 프로그램에 영향을 주지 않는것을 의미합니다. 독립성을 깨는 원인은 `데이터 종속성`과 `데이터 중복성`이 있습니다. 파일 처리 시스템은 데이터의 종속성과 중복성을 야기했고, 이를 최소화하기 위해 DBMS가 역할을 한다고 할 수 있습니다.
### 데이터 종속성
응용 프로그램과 데이터 간의 상호 의존 관계를 의미합니다. 응용 프로그램은 접근하려는 데이터의 구성 방법이나 접근 방법에 맞게 작성되어야 합니다.
### 데이터 중복성
같은 시스템 내 내용이 같은 데이터가 중복으로 저장 및 관리되는 것을 의미합니다.
- `일관성`: 동일성을 유지하기 어려워 데이터 간 불일치로 일관성이 없어짐
- `보안성`: 모든 데이터에 똑같은 보안을 유지하기 어려움
- `경제성`: 저장 공간 비용 증가
- `무결성`: 데이터의 정확성 유지가 어려움
## 데이터 언어
사용자 또는 응용 프로그램과 DBMS 간에 의사소통 하기위한 언어입니다. `데이터 정의어 DDL`, `데이터 조작어 DML`, `데이터 제어어 DCL` 로 구성되어 있습니다.
### DDL Data Definition Language
DB 스키마를 정의하거나 수정하는 목적으로 사용하는 언어입니다. 주로 데이터베이스 관리자가 사용합니다. 
- `CREATE 테이블 생성` `ALTER 테이블 수정` `DROP 테이블 삭제` `RENAME 테이블 이름 변경` `TRUNCATE 테이블 초기화`
### DML Data Manipulation Language
데이터 검색, 삽입, 삭제, 변경하는데 사용하는 언어입니다. 주로 사용자 또는 응용프로그램과 DBMS 간의 인터페이스를 제공합니다. 
- `SELECT 데이터 검색` `INSERT 데이터 추가` `UPDATE 데이터 수정` `DELETE 데이터 삭제`
### DCL Data Control Language
데이터베이스에 접근하고 객체들을 사용하도록 권한을 주거나 회수하는 목적으로 사용하는 언어입니다. 
- `GRANT 권한 정의` `REVOKE 권한 삭제`
### TCL Transaction Control Language
[트랜잭션](#트랜잭션)을 제어하기 위한 목적으로 사용하는 언어입니다.
- `COMMIT` 모든 부분작업이 정상 완료되면 변경사항을 한번에 DB에 반영
- `ROLLBACK` 부분 작업이 실패하면 트랜잭션 실행 전으로 되돌림
## 트랜잭션
데이터베이스의 상태를 변화시키기 위해 수행하는 작업의 논리적 단위입니다. `SELECT` `INSERT` `UPDATE` `DELETE` 등 조작어를 사용하는 것을 말합니다.
### 원자성 Atomicity
트랜잭션 작업이 부분적으로 실행되거나 중단되지 않는 것을 보장합니다. 오류가 발생하여 `rollback`을 해야하는 경우, 작업 전체를 초기화 하는것이 아닌 오류가 발생하지 않은 확실한 부분에 대해 `save point`를 지정하여 해결합니다.
### 일관성 Constency
트랜잭션의 작업 처리 결과는 항상 일관성이 있어야 합니다. 트랜잭션 수행 전후에 제약조건을 모두 만족해야 합니다. 어떤 이벤트와 조건이 발생할 떄 트랜잭션은 `트리거 trigger`를 통해 일관성을 보장합니다.
### 고립성 Isolation
트랜잭션 수행 시 다른 트랜잭션 작업이 끼어들지 못하도록 보장해야 합니다. 데이터를 읽거나 쓰기 작업 중에 해당 영역에 `lock`을 걸고 다른 트랜잭션이 접그낳지 못하도록 합니다. 트랜잭션의 요청이 끝나면 unlock 하여 다른 트랜잭션을 처리하도록 합니다. 
- 참고로 MySQL의 InnoDB가 [격리수준](../06_query/05_transaction.md#isolation-level-격리-수준)은 `Repeatable READ` 입니다.
### 지속성 Durability
성공적으로 수행된 트랜잭션은 영원히 반영되어야 합니다. 트랜잭션이 성공적으로 종료되어 COMMIT 연산을 실행했따면 이는 데이터베이스에 영원히 반영됩니다.