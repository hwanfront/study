# 정규화 Normalization
- 정규화란 테이블을 정규형으로 만드는 것입니다.
- 테이블 간에 중복된 데이터를 허용하지 않는 것을 의미합니다.
- 정규화를 통해 무결성을 유지할 수 있으며 저장 용량을 줄일 수 있습니다.
- 삽입, 수정, 삭제 시 문제가 없는가 확인해봐야 합니다.
- 보통은 `BCNF` 까지만 하는 경우가 많습니다. 그 이상으로 정규화를 하면 정규화의 단점이 나타난답니다.
## 1NF
테이블의 컬럼에는 **쪼갤 수 없는 원자값**만 들어가야 합니다.
|[고객취미목록]|이름|취미목록|
|---|---|---|
||김하나|영화, 쇼핑|
||김두나|게임|

취미목록은 쪼갤 수 있는 값이기 때문에 분리합니다.
[고객취미]|이름|취미|
|---|---|---|
||김하나|영화|
||김하나|쇼핑|
||김두나|게임|
## 2NF 
`1NF` 을 진행한 테이블에 대해 [`완전 함수 종속성`](./01_functional_dependency.md#완전-함수-종속)을 만족하도록 테이블을 분해합니다.
|[수강강좌성적]|<ins>학생번호</ins>|<ins>강좌</ins>|강의실|성적|
|---|---|---|---|---|
||1|DB|D304|3.0|
||2|DB|D304|3.5|
||3|자료구조|D305|4.0|
||1|자바|D306|3.0|

테이블의 기본키인 학생번호와 강좌가 복합키입니다. 기본키인 학생번호와 강좌는 성적을 결장하지만, 강의실은 강좌에 의해서 결정됩니다. 기본키의 부분키인 강의실이 결정자이기 때문에 테이블을 분리합니다.
|[수강성적]|<ins>학생번호</ins>|<ins>강좌</ins>|성적|/|[강의실]|<ins>강좌</ins>|강의실|
|---|---|---|---|---|---|---|---|
||1|DB|3.0|/||DB|D304|
||2|DB|3.5|/||자료구조|D305|
||3|자료구조|4.0|/||자바|D306|
||1|자바|3.0|
## 3NF 
`2NF` 을 진행한 테이블에 대해 [`이행적 함수 종속성`](./01_functional_dependency.md#이행적-함수-종속)을 없애도록 테이블을 분해합니다. A -> B, B -> C 의 종속 관계가 있는 경우에 A -> C가 성립합니다.
|[상품구매]|<ins>구매자</ins>|상품이름|가격|
|---|---|---|---|
||김하나|AA|5000|
||김두나|AA|5000|
||김세나|BB|3000|
||김사나|CC|8000|

구매자가 상품이름을 결정하고 있고, 상품이름이 가격을 결정하고 있으므로 테이블을 분해합니다
|[상품구매]|<ins>구매자</ins>|상품이름|[상품]|<ins>상품이름</ins>|가격|
|---|---|---|---|---|---|
||김하나|AA||AA|5000
||김두나|AA||BB|3000
||김세나|BB||CC|8000
||김사나|CC||
## BCNF Boyce-Codd Normal Form
`3NF` 을 진행한 테이블에 대해 모든 결정자가 [`후보키`](../03_erd/02_key.md#후보키-candidate-key)가 되도록 테이블을 분해합니다.
|[수강]|<ins>학생</ins>|<ins>강의이름</ins>|교수|
|---|---|---|---|
||김하나|DB|교수A|
||김두나|DB|교수A|
||김하나|JAVA|교수B|
||김세나|JAVA|교수C|
||김사나|C|교수D|

기본키인 학생과 강의이름은 교수를 결정합니다. 또한 교수는 강의이름을 결정하빈다. 교수는 강의이름을 경정하는 결정자이지만 후보키는 아니기에 테이블을 분해합니다.
|[수강신청]|<ins>학생</ins>|강의이름|[수강교수]|<ins>교수</ins>|강의이름|
|---|---|---|---|---|---|
||김하나|DB||교수A|DB|
||김두나|DB||교수B|JAVA|
||김하나|JAVA||교수C|JAVA|
||김세나|JAVA||교수D|C|
||김사나|C|
## 4NF
`BCNF` 을 진행한 테이블에 대해 다치 종속을 제거합니다. 
|[학생]|학생이름|과목|취미|
|---|---|---|---|
||김하나|DB|게임|
||김하나|JAVA|산책|

위 테이블에서 학생이름 `김하나` 기준으로 조회를 하면 중복이 발생합니다.
|[학생]|학생이름|과목|취미|
|---|---|---|---|
||김하나|DB|게임|
||김하나|DB|산책|
||김하나|JAVA|게임|
||김하나|JAVA|산책|

과목과 취미는 관계가 없는 독립적인 관계입니다. 학생에 과목과 취미가 각각 여러 개 종속된 경우 학생 컬럼에 다치 종속되어 중복이 발생하므로 테이블을 분해합니다.
|[과목]|학생이름|과목|[학생취미]|학생이름|과목|
|---|---|---|---|---|---|
||김하나|DB||김하나|게임|
||김하나|JAVA||김하나|산책|
## 5NF = PJNF Project Join Normal Form
`4NF` 을 진행한 테이블에 대해 조인 종속성을 제거합니다. 조인 연산을 했을 때 손실이 없어야 합니다. 
- 하나의 릴레이션을 여러 릴레이션으로 무손실 분해했다가 다시 결합할 수 있다면 조인 종속입니다.
